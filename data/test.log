/*C3*/SET SCHEMA PUBLIC
alter table Home add column idPerson bigint
alter table Home add constraint FK_lyyaejjyrlk8uo1egti8arsjm foreign key (idPerson) references Person
INSERT INTO PERSON VALUES(2,NULL,NULL,'martin')
COMMIT
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
INSERT INTO PERSON VALUES(3,NULL,NULL,'martin')
COMMIT
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
create table Person_Person (Person_idPerson bigint not null, friends_idPerson bigint not null)
alter table Person_Person add constraint FK_ismdpg366xxco79yx8ufaavyy foreign key (friends_idPerson) references Person
alter table Person_Person add constraint FK_g1to3j1exltat2os8vfy13sqp foreign key (Person_idPerson) references Person
INSERT INTO HOME VALUES(1,20,1,NULL)
INSERT INTO HOME VALUES(2,20,1,NULL)
INSERT INTO ELECTRONICDEVICE VALUES(1,NULL)
INSERT INTO PERSON VALUES(4,'lol','adresse@mail','zouzou')
INSERT INTO PERSON VALUES(5,'lol','adresse@mail','zouzou')
INSERT INTO HEATER VALUES(1,NULL,NULL)
INSERT INTO HEATER VALUES(2,NULL,NULL)
DELETE FROM HEATER WHERE IDHEATER=1
INSERT INTO HEATER VALUES(1,NULL,1)
DELETE FROM HEATER WHERE IDHEATER=2
INSERT INTO HEATER VALUES(2,NULL,1)
DELETE FROM HEATER WHERE IDHEATER=1
INSERT INTO HEATER VALUES(1,NULL,2)
DELETE FROM HEATER WHERE IDHEATER=2
INSERT INTO HEATER VALUES(2,NULL,2)
DELETE FROM ELECTRONICDEVICE WHERE IDELECTRONICDEVICE=1
INSERT INTO ELECTRONICDEVICE VALUES(1,4)
INSERT INTO PERSON_PERSON VALUES(4,5)
DELETE FROM HOME WHERE IDHOME=1
INSERT INTO HOME VALUES(1,20,1,4)
DELETE FROM ELECTRONICDEVICE WHERE IDELECTRONICDEVICE=1
INSERT INTO ELECTRONICDEVICE VALUES(1,5)
INSERT INTO PERSON_PERSON VALUES(5,4)
DELETE FROM HOME WHERE IDHOME=2
INSERT INTO HOME VALUES(2,20,1,5)
COMMIT
/*C6*/SET SCHEMA PUBLIC
alter table ElectronicDevice drop constraint FK_qt0o0jhn8s1sekwbhu0gpewib
alter table Heater drop constraint FK_ti9roda757ux394q4gsdnvfex
alter table Home drop constraint FK_lyyaejjyrlk8uo1egti8arsjm
alter table Person_Person drop constraint FK_ismdpg366xxco79yx8ufaavyy
alter table Person_Person drop constraint FK_g1to3j1exltat2os8vfy13sqp
drop table Heater if exists
drop table Person_Person if exists
create table Heater (idHeater integer generated by default as identity (start with 1), idHome integer, primary key (idHeater))
create table Person_Person (Person_idPerson bigint not null, friends_idPerson bigint not null)
alter table ElectronicDevice add constraint FK_qt0o0jhn8s1sekwbhu0gpewib foreign key (idPerson) references Person
alter table Heater add constraint FK_ti9roda757ux394q4gsdnvfex foreign key (idHome) references Home
alter table Home add constraint FK_lyyaejjyrlk8uo1egti8arsjm foreign key (idPerson) references Person
alter table Person_Person add constraint FK_ismdpg366xxco79yx8ufaavyy foreign key (friends_idPerson) references Person
alter table Person_Person add constraint FK_g1to3j1exltat2os8vfy13sqp foreign key (Person_idPerson) references Person
INSERT INTO HOME VALUES(3,20,1,NULL)
INSERT INTO HOME VALUES(4,20,1,NULL)
INSERT INTO ELECTRONICDEVICE VALUES(2,NULL)
INSERT INTO PERSON VALUES(6,'lol','adresse@mail','zouzou')
INSERT INTO PERSON VALUES(7,'lol','adresse@mail','zouzou')
INSERT INTO HEATER VALUES(1,NULL)
INSERT INTO HEATER VALUES(2,NULL)
DELETE FROM HEATER WHERE IDHEATER=1
INSERT INTO HEATER VALUES(1,3)
DELETE FROM HEATER WHERE IDHEATER=2
INSERT INTO HEATER VALUES(2,3)
DELETE FROM HEATER WHERE IDHEATER=1
INSERT INTO HEATER VALUES(1,4)
DELETE FROM HEATER WHERE IDHEATER=2
INSERT INTO HEATER VALUES(2,4)
DELETE FROM ELECTRONICDEVICE WHERE IDELECTRONICDEVICE=2
INSERT INTO ELECTRONICDEVICE VALUES(2,6)
INSERT INTO PERSON_PERSON VALUES(6,7)
DELETE FROM HOME WHERE IDHOME=3
INSERT INTO HOME VALUES(3,20,1,6)
DELETE FROM ELECTRONICDEVICE WHERE IDELECTRONICDEVICE=2
INSERT INTO ELECTRONICDEVICE VALUES(2,7)
INSERT INTO PERSON_PERSON VALUES(7,6)
DELETE FROM HOME WHERE IDHOME=4
INSERT INTO HOME VALUES(4,20,1,7)
COMMIT
DISCONNECT
/*C5*/DISCONNECT
/*C2*/SET SCHEMA PUBLIC
DISCONNECT
